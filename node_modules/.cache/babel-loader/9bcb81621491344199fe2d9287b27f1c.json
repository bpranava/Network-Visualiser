{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _alignment4 = _interopRequireDefault(require(\"viz-annotation/lib/Note/alignment\"));\n\nvar _Handle = _interopRequireDefault(require(\"../Handle\"));\n\nvar _lineTypeVertical = _interopRequireDefault(require(\"viz-annotation/lib/Note/lineType-vertical\"));\n\nvar _lineTypeHorizontal = _interopRequireDefault(require(\"viz-annotation/lib/Note/lineType-horizontal\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar getOuterBBox = function getOuterBBox() {\n  for (var _len = arguments.length, domNodes = new Array(_len), _key = 0; _key < _len; _key++) {\n    domNodes[_key] = arguments[_key];\n  }\n\n  return domNodes.concat().reduce(function (p, c) {\n    if (c) {\n      var bbox = c.getBBox();\n      p.x = Math.min(p.x, bbox.x);\n      p.y = Math.min(p.y, bbox.y);\n      p.width = Math.max(p.width, bbox.width);\n      var yOffset = c && c.attributes && c.attributes.y;\n      p.height = Math.max(p.height, (yOffset && parseFloat(yOffset.value) || 0) + bbox.height);\n    }\n\n    return p;\n  }, {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  });\n};\n\nvar Note = /*#__PURE__*/function (_React$Component) {\n  _inherits(Note, _React$Component);\n\n  function Note(props) {\n    var _this;\n\n    _classCallCheck(this, Note);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Note).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      translateX: 0,\n      translateY: 0,\n      labelOffset: 0,\n      changed: 0,\n      bbox: {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0\n      }\n    });\n\n    _this.updateText = _this.updateText.bind(_assertThisInitialized(_assertThisInitialized(_this))); // this.note = React.createRef()\n    // this.title = React.createRef()\n    // this.label = React.createRef()\n\n    return _this;\n  }\n\n  _createClass(Note, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateText(this.props);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.title !== this.props.title || nextProps.label !== this.props.label || nextProps.wrap !== this.props.wrap) {\n        this.updateText(nextProps);\n      }\n\n      if (nextProps.editMode && (nextProps.align === \"dynamic\" || !nextProps.align)) {\n        this.updateText(nextProps);\n      }\n    }\n  }, {\n    key: \"updateText\",\n    value: function updateText(_ref) {\n      var _this2 = this;\n\n      var orientation = _ref.orientation,\n          padding = _ref.padding,\n          align = _ref.align,\n          lineType = _ref.lineType,\n          label = _ref.label,\n          title = _ref.title,\n          wrap = _ref.wrap,\n          wrapSplitter = _ref.wrapSplitter,\n          dx = _ref.dx,\n          dy = _ref.dy;\n      var newState = {\n        titleWrapped: null,\n        labelWrapped: null\n      };\n      newState.changed = this.state.changed + 1;\n\n      if (title) {\n        newState.titleWrapped = this.title && this.wrapText(this.title, newState.changed, title, wrap, wrapSplitter);\n      }\n\n      if (label) newState.labelWrapped = this.label && this.wrapText(this.label, newState.changed, label, wrap, wrapSplitter);\n      this.setState(newState, function () {\n        var setLabel = function setLabel() {\n          var bbox = getOuterBBox(_this2.title, _this2.label);\n          var noteParams = {\n            padding: padding,\n            bbox: bbox,\n            offset: {\n              x: dx,\n              y: dy\n            },\n            orientation: orientation,\n            align: align\n          };\n          if (lineType === \"vertical\") noteParams.orientation = \"leftRight\";else if (lineType === \"horizontal\") noteParams.orientation = \"topBottom\";\n\n          var _alignment = (0, _alignment4.default)(noteParams),\n              x = _alignment.x,\n              y = _alignment.y;\n\n          _this2.setState({\n            translateX: x,\n            translateY: y,\n            bbox: bbox\n          });\n        };\n\n        _this2.setState({\n          labelOffset: title && _this2.title.getBBox().height || 0\n        }, setLabel);\n      });\n    }\n  }, {\n    key: \"wrapText\",\n    value: function wrapText(textRef, key, text, width, wrapSplitter) {\n      var initialAttrs = {\n        x: 0,\n        dy: \"1.2em\"\n      };\n      var words = text.split(wrapSplitter || /[ \\t\\r\\n]+/).reverse().filter(function (w) {\n        return w !== \"\";\n      });\n      var word,\n          line = [];\n      var tspans = [];\n\n      while (word = words.pop()) {\n        line.push(word);\n        textRef.lastChild.textContent = line.join(\" \");\n        var length = textRef.lastChild.getComputedTextLength();\n        textRef.lastChild.textContent = \"\";\n\n        if (length > width && line.length > 1) {\n          line.pop();\n          tspans.push(_react.default.createElement(\"tspan\", _extends({\n            key: tspans.length + text\n          }, initialAttrs), line.join(\" \")));\n          line = [word];\n        }\n      }\n\n      if (line.length !== 0) {\n        tspans.push(_react.default.createElement(\"tspan\", _extends({\n          key: tspans.length + text\n        }, initialAttrs), line.join(\" \")));\n      }\n\n      return _react.default.createElement(\"tspan\", _extends({}, initialAttrs, {\n        key: key + text\n      }), tspans);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          orientation = _this$props.orientation,\n          padding = _this$props.padding,\n          align = _this$props.align,\n          dx = _this$props.dx,\n          dy = _this$props.dy,\n          lineType = _this$props.lineType;\n\n      if (this.state.bbox.width && (prevProps.dx !== this.props.dx || prevProps.dy !== this.props.dy) && (this.title || this.label)) {\n        var bbox = getOuterBBox(this.title, this.label);\n        var noteParams = {\n          padding: padding,\n          bbox: bbox,\n          offset: {\n            x: dx,\n            y: dy\n          },\n          orientation: orientation,\n          align: align\n        };\n        if (lineType === \"vertical\") noteParams.orientation = \"leftRight\";else if (lineType === \"horizontal\") noteParams.orientation = \"topBottom\";\n\n        var _alignment2 = (0, _alignment4.default)(noteParams),\n            x = _alignment2.x,\n            y = _alignment2.y;\n\n        var updates = {\n          bbox: bbox\n        };\n        if (this.state.translateX !== x) updates.translateX = x;\n        if (this.state.translateY !== y) updates.translateY = y;\n\n        if (updates.translateX !== undefined || updates.translateY !== undefined) {\n          this.setState(updates);\n        }\n      } else if (this.state.align !== prevProps.align || this.props.orientation !== prevProps.orientation || this.props.padding !== prevProps.padding) {\n        var _noteParams = {\n          padding: padding,\n          bbox: this.state.bbox,\n          offset: {\n            x: dx,\n            y: dy\n          },\n          orientation: orientation,\n          align: align\n        };\n        if (lineType === \"vertical\") _noteParams.orientation = \"leftRight\";else if (lineType === \"horizontal\") _noteParams.orientation = \"topBottom\";\n\n        var _alignment3 = (0, _alignment4.default)(_noteParams),\n            _x = _alignment3.x,\n            _y = _alignment3.y;\n\n        var _updates = {};\n        if (this.state.translateX !== _x) _updates.translateX = _x;\n        if (this.state.translateY !== _y) _updates.translateY = _y;\n\n        if (_updates.translateX !== undefined || _updates.translateY !== undefined) {\n          this.setState(_updates);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          dx = _this$props2.dx,\n          dy = _this$props2.dy,\n          title = _this$props2.title,\n          label = _this$props2.label,\n          align = _this$props2.align,\n          editMode = _this$props2.editMode,\n          lineType = _this$props2.lineType,\n          color = _this$props2.color,\n          titleColor = _this$props2.titleColor,\n          labelColor = _this$props2.labelColor,\n          bgPadding = _this$props2.bgPadding;\n      var bgPaddingFinal = {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0\n      };\n\n      if (typeof bgPadding === \"number\") {\n        bgPaddingFinal = {\n          top: bgPadding,\n          bottom: bgPadding,\n          left: bgPadding,\n          right: bgPadding\n        };\n      } else if (bgPadding && _typeof(bgPadding) === \"object\") {\n        bgPaddingFinal = Object.assign(bgPaddingFinal, bgPadding);\n      }\n\n      var noteTitle, noteText, noteLineType;\n\n      if (title) {\n        noteTitle = _react.default.createElement(\"text\", {\n          ref: function ref(el) {\n            return _this3.title = el;\n          },\n          className: \"annotation-note-title\",\n          fontWeight: \"bold\",\n          key: \"title\",\n          fill: titleColor || color\n        }, this.state.titleWrapped || _react.default.createElement(\"tspan\", {\n          x: 0,\n          dy: \".8em\"\n        }, title));\n      }\n\n      if (label) {\n        noteText = _react.default.createElement(\"text\", {\n          ref: function ref(el) {\n            return _this3.label = el;\n          },\n          className: \"annotation-note-label\",\n          y: this.state.labelOffset * 1.1,\n          key: \"label\",\n          fill: labelColor || color\n        }, this.state.labelWrapped || _react.default.createElement(\"tspan\", {\n          x: 0,\n          dy: \".8em\"\n        }, label));\n      }\n\n      if (lineType && this.state.bbox.width) {\n        var noteParams = {\n          bbox: this.state.bbox,\n          align: align,\n          offset: {\n            x: dx,\n            y: dy\n          }\n        };\n        var noteComponent = (lineType === \"vertical\" && (0, _lineTypeVertical.default)(noteParams) || lineType === \"horizontal\" && (0, _lineTypeHorizontal.default)(noteParams)).components[0];\n        noteLineType = _react.default.createElement(noteComponent.type, _extends({\n          className: noteComponent.className\n        }, noteComponent.attrs, {\n          stroke: color\n        }));\n      }\n\n      var handle;\n\n      if (editMode) {\n        handle = _react.default.createElement(_Handle.default, {\n          handleStart: this.props.dragStart,\n          handleStop: this.props.dragEnd,\n          handleDrag: this.props.dragNote\n        });\n      }\n\n      return _react.default.createElement(\"g\", _extends({\n        transform: \"translate(\".concat(dx, \", \").concat(dy, \")\"),\n        className: \"annotation-note\"\n      }, this.props.gProps), _react.default.createElement(\"g\", {\n        className: \"annotation-note-content\",\n        transform: \"translate(\".concat(this.state.translateX, \",\\n          \").concat(this.state.translateY, \")\"),\n        ref: function ref(el) {\n          return _this3.note = el;\n        }\n      }, _react.default.createElement(\"rect\", {\n        className: \"annotation-note-bg\",\n        width: this.state.bbox.width + bgPaddingFinal.left + bgPaddingFinal.right,\n        x: -bgPaddingFinal.left,\n        y: -bgPaddingFinal.top,\n        height: this.state.bbox.height + bgPaddingFinal.top + bgPaddingFinal.bottom,\n        stroke: \"none\",\n        fill: \"white\",\n        fillOpacity: \"0\"\n      }), noteTitle, noteText), noteLineType, handle);\n    }\n  }]);\n\n  return Note;\n}(_react.default.Component);\n\nexports.default = Note;\nNote.defaultProps = {\n  wrap: 120,\n  align: \"dynamic\",\n  orientation: \"topBottom\",\n  padding: 3\n};\nNote.propTypes = {\n  dx: _propTypes.default.number,\n  dy: _propTypes.default.number,\n  title: _propTypes.default.string,\n  label: _propTypes.default.string,\n  orientation: _propTypes.default.oneOf([\"leftRight\", \"topBottom\"]),\n  padding: _propTypes.default.number,\n  bgPadding: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.object]),\n  align: _propTypes.default.oneOf([\"left\", \"right\", \"middle\", \"top\", \"bottom\", \"dynamic\"]),\n  editMode: _propTypes.default.bool,\n  lineType: _propTypes.default.oneOf([\"vertical\", \"horizontal\"]),\n  color: _propTypes.default.string,\n  titleColor: _propTypes.default.string,\n  labelColor: _propTypes.default.string\n};","map":{"version":3,"sources":["/home/pranava/Desktop/network_visualiser/node_modules/react-annotation/lib/Note/Note.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireDefault","require","_alignment4","_Handle","_lineTypeVertical","_lineTypeHorizontal","_propTypes","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","ReferenceError","_defineProperty","getOuterBBox","_len","domNodes","Array","_key","concat","reduce","c","bbox","getBBox","x","Math","min","y","width","max","yOffset","attributes","height","parseFloat","Note","_React$Component","_this","translateX","translateY","labelOffset","changed","updateText","bind","componentDidMount","componentWillReceiveProps","nextProps","title","label","wrap","editMode","align","_ref","_this2","orientation","padding","lineType","wrapSplitter","dx","dy","newState","titleWrapped","labelWrapped","state","wrapText","setState","setLabel","noteParams","offset","_alignment","textRef","text","initialAttrs","words","split","reverse","filter","w","word","line","tspans","pop","push","lastChild","textContent","join","getComputedTextLength","createElement","componentDidUpdate","prevProps","_this$props","_alignment2","updates","undefined","_noteParams","_alignment3","_x","_y","_updates","render","_this3","_this$props2","color","titleColor","labelColor","bgPadding","bgPaddingFinal","top","bottom","left","right","noteTitle","noteText","noteLineType","ref","el","className","fontWeight","fill","noteComponent","components","type","attrs","stroke","handle","handleStart","dragStart","handleStop","dragEnd","handleDrag","dragNote","transform","gProps","note","fillOpacity","Component","defaultProps","propTypes","number","string","oneOf","oneOfType","object","bool"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _alignment4 = _interopRequireDefault(require(\"viz-annotation/lib/Note/alignment\"));\n\nvar _Handle = _interopRequireDefault(require(\"../Handle\"));\n\nvar _lineTypeVertical = _interopRequireDefault(require(\"viz-annotation/lib/Note/lineType-vertical\"));\n\nvar _lineTypeHorizontal = _interopRequireDefault(require(\"viz-annotation/lib/Note/lineType-horizontal\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar getOuterBBox = function getOuterBBox() {\n  for (var _len = arguments.length, domNodes = new Array(_len), _key = 0; _key < _len; _key++) {\n    domNodes[_key] = arguments[_key];\n  }\n\n  return domNodes.concat().reduce(function (p, c) {\n    if (c) {\n      var bbox = c.getBBox();\n      p.x = Math.min(p.x, bbox.x);\n      p.y = Math.min(p.y, bbox.y);\n      p.width = Math.max(p.width, bbox.width);\n      var yOffset = c && c.attributes && c.attributes.y;\n      p.height = Math.max(p.height, (yOffset && parseFloat(yOffset.value) || 0) + bbox.height);\n    }\n\n    return p;\n  }, {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  });\n};\n\nvar Note =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Note, _React$Component);\n\n  function Note(props) {\n    var _this;\n\n    _classCallCheck(this, Note);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Note).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      translateX: 0,\n      translateY: 0,\n      labelOffset: 0,\n      changed: 0,\n      bbox: {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0\n      }\n    });\n\n    _this.updateText = _this.updateText.bind(_assertThisInitialized(_assertThisInitialized(_this))); // this.note = React.createRef()\n    // this.title = React.createRef()\n    // this.label = React.createRef()\n\n    return _this;\n  }\n\n  _createClass(Note, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateText(this.props);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.title !== this.props.title || nextProps.label !== this.props.label || nextProps.wrap !== this.props.wrap) {\n        this.updateText(nextProps);\n      }\n\n      if (nextProps.editMode && (nextProps.align === \"dynamic\" || !nextProps.align)) {\n        this.updateText(nextProps);\n      }\n    }\n  }, {\n    key: \"updateText\",\n    value: function updateText(_ref) {\n      var _this2 = this;\n\n      var orientation = _ref.orientation,\n          padding = _ref.padding,\n          align = _ref.align,\n          lineType = _ref.lineType,\n          label = _ref.label,\n          title = _ref.title,\n          wrap = _ref.wrap,\n          wrapSplitter = _ref.wrapSplitter,\n          dx = _ref.dx,\n          dy = _ref.dy;\n      var newState = {\n        titleWrapped: null,\n        labelWrapped: null\n      };\n      newState.changed = this.state.changed + 1;\n\n      if (title) {\n        newState.titleWrapped = this.title && this.wrapText(this.title, newState.changed, title, wrap, wrapSplitter);\n      }\n\n      if (label) newState.labelWrapped = this.label && this.wrapText(this.label, newState.changed, label, wrap, wrapSplitter);\n      this.setState(newState, function () {\n        var setLabel = function setLabel() {\n          var bbox = getOuterBBox(_this2.title, _this2.label);\n          var noteParams = {\n            padding: padding,\n            bbox: bbox,\n            offset: {\n              x: dx,\n              y: dy\n            },\n            orientation: orientation,\n            align: align\n          };\n          if (lineType === \"vertical\") noteParams.orientation = \"leftRight\";else if (lineType === \"horizontal\") noteParams.orientation = \"topBottom\";\n\n          var _alignment = (0, _alignment4.default)(noteParams),\n              x = _alignment.x,\n              y = _alignment.y;\n\n          _this2.setState({\n            translateX: x,\n            translateY: y,\n            bbox: bbox\n          });\n        };\n\n        _this2.setState({\n          labelOffset: title && _this2.title.getBBox().height || 0\n        }, setLabel);\n      });\n    }\n  }, {\n    key: \"wrapText\",\n    value: function wrapText(textRef, key, text, width, wrapSplitter) {\n      var initialAttrs = {\n        x: 0,\n        dy: \"1.2em\"\n      };\n      var words = text.split(wrapSplitter || /[ \\t\\r\\n]+/).reverse().filter(function (w) {\n        return w !== \"\";\n      });\n      var word,\n          line = [];\n      var tspans = [];\n\n      while (word = words.pop()) {\n        line.push(word);\n        textRef.lastChild.textContent = line.join(\" \");\n        var length = textRef.lastChild.getComputedTextLength();\n        textRef.lastChild.textContent = \"\";\n\n        if (length > width && line.length > 1) {\n          line.pop();\n          tspans.push(_react.default.createElement(\"tspan\", _extends({\n            key: tspans.length + text\n          }, initialAttrs), line.join(\" \")));\n          line = [word];\n        }\n      }\n\n      if (line.length !== 0) {\n        tspans.push(_react.default.createElement(\"tspan\", _extends({\n          key: tspans.length + text\n        }, initialAttrs), line.join(\" \")));\n      }\n\n      return _react.default.createElement(\"tspan\", _extends({}, initialAttrs, {\n        key: key + text\n      }), tspans);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          orientation = _this$props.orientation,\n          padding = _this$props.padding,\n          align = _this$props.align,\n          dx = _this$props.dx,\n          dy = _this$props.dy,\n          lineType = _this$props.lineType;\n\n      if (this.state.bbox.width && (prevProps.dx !== this.props.dx || prevProps.dy !== this.props.dy) && (this.title || this.label)) {\n        var bbox = getOuterBBox(this.title, this.label);\n        var noteParams = {\n          padding: padding,\n          bbox: bbox,\n          offset: {\n            x: dx,\n            y: dy\n          },\n          orientation: orientation,\n          align: align\n        };\n        if (lineType === \"vertical\") noteParams.orientation = \"leftRight\";else if (lineType === \"horizontal\") noteParams.orientation = \"topBottom\";\n\n        var _alignment2 = (0, _alignment4.default)(noteParams),\n            x = _alignment2.x,\n            y = _alignment2.y;\n\n        var updates = {\n          bbox: bbox\n        };\n        if (this.state.translateX !== x) updates.translateX = x;\n        if (this.state.translateY !== y) updates.translateY = y;\n\n        if (updates.translateX !== undefined || updates.translateY !== undefined) {\n          this.setState(updates);\n        }\n      } else if (this.state.align !== prevProps.align || this.props.orientation !== prevProps.orientation || this.props.padding !== prevProps.padding) {\n        var _noteParams = {\n          padding: padding,\n          bbox: this.state.bbox,\n          offset: {\n            x: dx,\n            y: dy\n          },\n          orientation: orientation,\n          align: align\n        };\n        if (lineType === \"vertical\") _noteParams.orientation = \"leftRight\";else if (lineType === \"horizontal\") _noteParams.orientation = \"topBottom\";\n\n        var _alignment3 = (0, _alignment4.default)(_noteParams),\n            _x = _alignment3.x,\n            _y = _alignment3.y;\n\n        var _updates = {};\n        if (this.state.translateX !== _x) _updates.translateX = _x;\n        if (this.state.translateY !== _y) _updates.translateY = _y;\n\n        if (_updates.translateX !== undefined || _updates.translateY !== undefined) {\n          this.setState(_updates);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          dx = _this$props2.dx,\n          dy = _this$props2.dy,\n          title = _this$props2.title,\n          label = _this$props2.label,\n          align = _this$props2.align,\n          editMode = _this$props2.editMode,\n          lineType = _this$props2.lineType,\n          color = _this$props2.color,\n          titleColor = _this$props2.titleColor,\n          labelColor = _this$props2.labelColor,\n          bgPadding = _this$props2.bgPadding;\n      var bgPaddingFinal = {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0\n      };\n\n      if (typeof bgPadding === \"number\") {\n        bgPaddingFinal = {\n          top: bgPadding,\n          bottom: bgPadding,\n          left: bgPadding,\n          right: bgPadding\n        };\n      } else if (bgPadding && _typeof(bgPadding) === \"object\") {\n        bgPaddingFinal = Object.assign(bgPaddingFinal, bgPadding);\n      }\n\n      var noteTitle, noteText, noteLineType;\n\n      if (title) {\n        noteTitle = _react.default.createElement(\"text\", {\n          ref: function ref(el) {\n            return _this3.title = el;\n          },\n          className: \"annotation-note-title\",\n          fontWeight: \"bold\",\n          key: \"title\",\n          fill: titleColor || color\n        }, this.state.titleWrapped || _react.default.createElement(\"tspan\", {\n          x: 0,\n          dy: \".8em\"\n        }, title));\n      }\n\n      if (label) {\n        noteText = _react.default.createElement(\"text\", {\n          ref: function ref(el) {\n            return _this3.label = el;\n          },\n          className: \"annotation-note-label\",\n          y: this.state.labelOffset * 1.1,\n          key: \"label\",\n          fill: labelColor || color\n        }, this.state.labelWrapped || _react.default.createElement(\"tspan\", {\n          x: 0,\n          dy: \".8em\"\n        }, label));\n      }\n\n      if (lineType && this.state.bbox.width) {\n        var noteParams = {\n          bbox: this.state.bbox,\n          align: align,\n          offset: {\n            x: dx,\n            y: dy\n          }\n        };\n        var noteComponent = (lineType === \"vertical\" && (0, _lineTypeVertical.default)(noteParams) || lineType === \"horizontal\" && (0, _lineTypeHorizontal.default)(noteParams)).components[0];\n        noteLineType = _react.default.createElement(noteComponent.type, _extends({\n          className: noteComponent.className\n        }, noteComponent.attrs, {\n          stroke: color\n        }));\n      }\n\n      var handle;\n\n      if (editMode) {\n        handle = _react.default.createElement(_Handle.default, {\n          handleStart: this.props.dragStart,\n          handleStop: this.props.dragEnd,\n          handleDrag: this.props.dragNote\n        });\n      }\n\n      return _react.default.createElement(\"g\", _extends({\n        transform: \"translate(\".concat(dx, \", \").concat(dy, \")\"),\n        className: \"annotation-note\"\n      }, this.props.gProps), _react.default.createElement(\"g\", {\n        className: \"annotation-note-content\",\n        transform: \"translate(\".concat(this.state.translateX, \",\\n          \").concat(this.state.translateY, \")\"),\n        ref: function ref(el) {\n          return _this3.note = el;\n        }\n      }, _react.default.createElement(\"rect\", {\n        className: \"annotation-note-bg\",\n        width: this.state.bbox.width + bgPaddingFinal.left + bgPaddingFinal.right,\n        x: -bgPaddingFinal.left,\n        y: -bgPaddingFinal.top,\n        height: this.state.bbox.height + bgPaddingFinal.top + bgPaddingFinal.bottom,\n        stroke: \"none\",\n        fill: \"white\",\n        fillOpacity: \"0\"\n      }), noteTitle, noteText), noteLineType, handle);\n    }\n  }]);\n\n  return Note;\n}(_react.default.Component);\n\nexports.default = Note;\nNote.defaultProps = {\n  wrap: 120,\n  align: \"dynamic\",\n  orientation: \"topBottom\",\n  padding: 3\n};\nNote.propTypes = {\n  dx: _propTypes.default.number,\n  dy: _propTypes.default.number,\n  title: _propTypes.default.string,\n  label: _propTypes.default.string,\n  orientation: _propTypes.default.oneOf([\"leftRight\", \"topBottom\"]),\n  padding: _propTypes.default.number,\n  bgPadding: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.object]),\n  align: _propTypes.default.oneOf([\"left\", \"right\", \"middle\", \"top\", \"bottom\", \"dynamic\"]),\n  editMode: _propTypes.default.bool,\n  lineType: _propTypes.default.oneOf([\"vertical\", \"horizontal\"]),\n  color: _propTypes.default.string,\n  titleColor: _propTypes.default.string,\n  labelColor: _propTypes.default.string\n};"]},"metadata":{},"sourceType":"script"}